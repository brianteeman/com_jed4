import{_ as _objectSpread2}from"./carousel.js";import{B as BaseComponent,S as SelectorEngine,f as getSelectorFromElement,D as Data,E as EventHandler,a as getTransitionDurationFromElement,e as emulateTransitionEnd,r as reflow,g as getElementFromSelector,b as typeCheckConfig,h as isElement,M as Manipulator,d as defineJQueryPlugin}from"./dom.min.js?1614049248";var NAME="collapse",DATA_KEY="bs.collapse",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",Default={toggle:!0,parent:""},DefaultType={toggle:"boolean",parent:"(string|element)"},EVENT_SHOW="show".concat(EVENT_KEY),EVENT_SHOWN="shown".concat(EVENT_KEY),EVENT_HIDE="hide".concat(EVENT_KEY),EVENT_HIDDEN="hidden".concat(EVENT_KEY),EVENT_CLICK_DATA_API="click".concat(EVENT_KEY).concat(DATA_API_KEY),CLASS_NAME_SHOW="show",CLASS_NAME_COLLAPSE="collapse",CLASS_NAME_COLLAPSING="collapsing",CLASS_NAME_COLLAPSED="collapsed",WIDTH="width",HEIGHT="height",SELECTOR_ACTIVES=".show, .collapsing",SELECTOR_DATA_TOGGLE='[data-bs-toggle="collapse"]';class Collapse extends BaseComponent{constructor(e,t){super(e),this._isTransitioning=!1,this._config=this._getConfig(t),this._triggerArray=SelectorEngine.find("".concat(SELECTOR_DATA_TOGGLE,'[href="#').concat(e.id,'"],')+"".concat(SELECTOR_DATA_TOGGLE,'[data-bs-target="#').concat(e.id,'"]'));for(var n=SelectorEngine.find(SELECTOR_DATA_TOGGLE),a=0,s=n.length;a<s;a++){var i=n[a],r=getSelectorFromElement(i),o=SelectorEngine.find(r).filter((t=>t===e));null!==r&&o.length&&(this._selector=r,this._triggerArray.push(i))}this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}static get Default(){return Default}static get DATA_KEY(){return DATA_KEY}toggle(){this._element.classList.contains(CLASS_NAME_SHOW)?this.hide():this.show()}show(){if(!this._isTransitioning&&!this._element.classList.contains(CLASS_NAME_SHOW)){var e,t;this._parent&&0===(e=SelectorEngine.find(SELECTOR_ACTIVES,this._parent).filter((e=>"string"==typeof this._config.parent?e.getAttribute("data-bs-parent")===this._config.parent:e.classList.contains(CLASS_NAME_COLLAPSE)))).length&&(e=null);var n=SelectorEngine.findOne(this._selector);if(e){var a=e.find((e=>n!==e));if((t=a?Data.getData(a,DATA_KEY):null)&&t._isTransitioning)return}if(!EventHandler.trigger(this._element,EVENT_SHOW).defaultPrevented){e&&e.forEach((e=>{n!==e&&Collapse.collapseInterface(e,"hide"),t||Data.setData(e,DATA_KEY,null)}));var s=this._getDimension();this._element.classList.remove(CLASS_NAME_COLLAPSE),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.style[s]=0,this._triggerArray.length&&this._triggerArray.forEach((e=>{e.classList.remove(CLASS_NAME_COLLAPSED),e.setAttribute("aria-expanded",!0)})),this.setTransitioning(!0);var i=s[0].toUpperCase()+s.slice(1),r="scroll".concat(i),o=getTransitionDurationFromElement(this._element);EventHandler.one(this._element,"transitionend",(()=>{this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW),this._element.style[s]="",this.setTransitioning(!1),EventHandler.trigger(this._element,EVENT_SHOWN)})),emulateTransitionEnd(this._element,o),this._element.style[s]="".concat(this._element[r],"px")}}}hide(){if(!this._isTransitioning&&this._element.classList.contains(CLASS_NAME_SHOW)&&!EventHandler.trigger(this._element,EVENT_HIDE).defaultPrevented){var e=this._getDimension();this._element.style[e]="".concat(this._element.getBoundingClientRect()[e],"px"),reflow(this._element),this._element.classList.add(CLASS_NAME_COLLAPSING),this._element.classList.remove(CLASS_NAME_COLLAPSE,CLASS_NAME_SHOW);var t=this._triggerArray.length;if(t>0)for(var n=0;n<t;n++){var a=this._triggerArray[n],s=getElementFromSelector(a);s&&!s.classList.contains(CLASS_NAME_SHOW)&&(a.classList.add(CLASS_NAME_COLLAPSED),a.setAttribute("aria-expanded",!1))}this.setTransitioning(!0);this._element.style[e]="";var i=getTransitionDurationFromElement(this._element);EventHandler.one(this._element,"transitionend",(()=>{this.setTransitioning(!1),this._element.classList.remove(CLASS_NAME_COLLAPSING),this._element.classList.add(CLASS_NAME_COLLAPSE),EventHandler.trigger(this._element,EVENT_HIDDEN)})),emulateTransitionEnd(this._element,i)}}setTransitioning(e){this._isTransitioning=e}dispose(){super.dispose(),this._config=null,this._parent=null,this._triggerArray=null,this._isTransitioning=null}_getConfig(e){return(e=_objectSpread2(_objectSpread2({},Default),e)).toggle=Boolean(e.toggle),typeCheckConfig(NAME,e,DefaultType),e}_getDimension(){return this._element.classList.contains(WIDTH)?WIDTH:HEIGHT}_getParent(){var{parent:e}=this._config;isElement(e)?void 0===e.jquery&&void 0===e[0]||(e=e[0]):e=SelectorEngine.findOne(e);var t="".concat(SELECTOR_DATA_TOGGLE,'[data-bs-parent="').concat(e,'"]');return SelectorEngine.find(t,e).forEach((e=>{var t=getElementFromSelector(e);this._addAriaAndCollapsedClass(t,[e])})),e}_addAriaAndCollapsedClass(e,t){if(e&&t.length){var n=e.classList.contains(CLASS_NAME_SHOW);t.forEach((e=>{n?e.classList.remove(CLASS_NAME_COLLAPSED):e.classList.add(CLASS_NAME_COLLAPSED),e.setAttribute("aria-expanded",n)}))}}static collapseInterface(e,t){var n=Data.getData(e,DATA_KEY),a=_objectSpread2(_objectSpread2(_objectSpread2({},Default),Manipulator.getDataAttributes(e)),"object"==typeof t&&t?t:{});if(!n&&a.toggle&&"string"==typeof t&&/show|hide/.test(t)&&(a.toggle=!1),n||(n=new Collapse(e,a)),"string"==typeof t){if(void 0===n[t])throw new TypeError('No method named "'.concat(t,'"'));n[t]()}}static jQueryInterface(e){return this.each((function(){Collapse.collapseInterface(this,e)}))}}if(EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,(function(e){("A"===e.target.tagName||e.delegateTarget&&"A"===e.delegateTarget.tagName)&&e.preventDefault();var t=Manipulator.getDataAttributes(this),n=getSelectorFromElement(this);SelectorEngine.find(n).forEach((e=>{var n,a=Data.getData(e,DATA_KEY);a?(null===a._parent&&"string"==typeof t.parent&&(a._config.parent=t.parent,a._parent=a._getParent()),n="toggle"):n=t,Collapse.collapseInterface(e,n)}))})),defineJQueryPlugin(NAME,Collapse),window.bootstrap=window.bootstrap||{},window.bootstrap.Collapse=Collapse,Joomla&&Joomla.getOptions){var collapses=_objectSpread2(_objectSpread2({},Joomla.getOptions("bootstrap.collapse")),Joomla.getOptions("bootstrap.accordion"));Object.keys(collapses).forEach((e=>{var t=collapses[e],n={toggle:!t.toggle||t.toggle};t.parent&&(n.parent=t.parent);var a=Array.from(document.querySelectorAll(e));a.length&&a.map((e=>new window.bootstrap.Collapse(e,n)))}))}export{Collapse as C};