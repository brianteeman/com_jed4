import{B as BaseComponent,S as SelectorEngine,i as isVisible,t as triggerTransitionEnd,E as EventHandler,b as typeCheckConfig,c as isRTL,r as reflow,a as getTransitionDurationFromElement,e as emulateTransitionEnd,D as Data,M as Manipulator,g as getElementFromSelector,d as defineJQueryPlugin}from"./dom.min.js?1614308452";function _defineProperty(e,t,i){return t in e?Object.defineProperty(e,t,{value:i,enumerable:!0,configurable:!0,writable:!0}):e[t]=i,e}function ownKeys(e,t){var i=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),i.push.apply(i,n)}return i}function _objectSpread2(e){for(var t=1;t<arguments.length;t++){var i=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(i),!0).forEach((function(t){_defineProperty(e,t,i[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(i)):ownKeys(Object(i)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(i,t))}))}return e}var NAME="carousel",DATA_KEY="bs.carousel",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",ARROW_LEFT_KEY="ArrowLeft",ARROW_RIGHT_KEY="ArrowRight",TOUCHEVENT_COMPAT_WAIT=500,SWIPE_THRESHOLD=40,Default={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0,touch:!0},DefaultType={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean",touch:"boolean"},DIRECTION_NEXT="next",DIRECTION_PREV="prev",DIRECTION_LEFT="left",DIRECTION_RIGHT="right",EVENT_SLIDE="slide".concat(EVENT_KEY),EVENT_SLID="slid".concat(EVENT_KEY),EVENT_KEYDOWN="keydown".concat(EVENT_KEY),EVENT_MOUSEENTER="mouseenter".concat(EVENT_KEY),EVENT_MOUSELEAVE="mouseleave".concat(EVENT_KEY),EVENT_TOUCHSTART="touchstart".concat(EVENT_KEY),EVENT_TOUCHMOVE="touchmove".concat(EVENT_KEY),EVENT_TOUCHEND="touchend".concat(EVENT_KEY),EVENT_POINTERDOWN="pointerdown".concat(EVENT_KEY),EVENT_POINTERUP="pointerup".concat(EVENT_KEY),EVENT_DRAG_START="dragstart".concat(EVENT_KEY),EVENT_LOAD_DATA_API="load".concat(EVENT_KEY).concat(DATA_API_KEY),EVENT_CLICK_DATA_API="click".concat(EVENT_KEY).concat(DATA_API_KEY),CLASS_NAME_CAROUSEL="carousel",CLASS_NAME_ACTIVE="active",CLASS_NAME_SLIDE="slide",CLASS_NAME_END="carousel-item-end",CLASS_NAME_START="carousel-item-start",CLASS_NAME_NEXT="carousel-item-next",CLASS_NAME_PREV="carousel-item-prev",CLASS_NAME_POINTER_EVENT="pointer-event",SELECTOR_ACTIVE=".active",SELECTOR_ACTIVE_ITEM=".active.carousel-item",SELECTOR_ITEM=".carousel-item",SELECTOR_ITEM_IMG=".carousel-item img",SELECTOR_NEXT_PREV=".carousel-item-next, .carousel-item-prev",SELECTOR_INDICATORS=".carousel-indicators",SELECTOR_INDICATOR="[data-bs-target]",SELECTOR_DATA_SLIDE="[data-bs-slide], [data-bs-slide-to]",SELECTOR_DATA_RIDE='[data-bs-ride="carousel"]',POINTER_TYPE_TOUCH="touch",POINTER_TYPE_PEN="pen";class Carousel extends BaseComponent{constructor(e,t){super(e),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this.touchTimeout=null,this.touchStartX=0,this.touchDeltaX=0,this._config=this._getConfig(t),this._indicatorsElement=SelectorEngine.findOne(SELECTOR_INDICATORS,this._element),this._touchSupported="ontouchstart"in document.documentElement||navigator.maxTouchPoints>0,this._pointerEvent=Boolean(window.PointerEvent),this._addEventListeners()}static get Default(){return Default}static get DATA_KEY(){return DATA_KEY}next(){this._isSliding||this._slide(DIRECTION_NEXT)}nextWhenVisible(){!document.hidden&&isVisible(this._element)&&this.next()}prev(){this._isSliding||this._slide(DIRECTION_PREV)}pause(e){e||(this._isPaused=!0),SelectorEngine.findOne(SELECTOR_NEXT_PREV,this._element)&&(triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null}cycle(e){e||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config&&this._config.interval&&!this._isPaused&&(this._updateInterval(),this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))}to(e){this._activeElement=SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element);var t=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0))if(this._isSliding)EventHandler.one(this._element,EVENT_SLID,(()=>this.to(e)));else{if(t===e)return this.pause(),void this.cycle();var i=e>t?DIRECTION_NEXT:DIRECTION_PREV;this._slide(i,this._items[e])}}dispose(){super.dispose(),EventHandler.off(this._element,EVENT_KEY),this._items=null,this._config=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null}_getConfig(e){return e=_objectSpread2(_objectSpread2({},Default),e),typeCheckConfig(NAME,e,DefaultType),e}_handleSwipe(){var e=Math.abs(this.touchDeltaX);if(!(e<=SWIPE_THRESHOLD)){var t=e/this.touchDeltaX;this.touchDeltaX=0,t>0&&(isRTL?this.next():this.prev()),t<0&&(isRTL?this.prev():this.next())}}_addEventListeners(){this._config.keyboard&&EventHandler.on(this._element,EVENT_KEYDOWN,(e=>this._keydown(e))),"hover"===this._config.pause&&(EventHandler.on(this._element,EVENT_MOUSEENTER,(e=>this.pause(e))),EventHandler.on(this._element,EVENT_MOUSELEAVE,(e=>this.cycle(e)))),this._config.touch&&this._touchSupported&&this._addTouchEventListeners()}_addTouchEventListeners(){var e=e=>{!this._pointerEvent||e.pointerType!==POINTER_TYPE_PEN&&e.pointerType!==POINTER_TYPE_TOUCH?this._pointerEvent||(this.touchStartX=e.touches[0].clientX):this.touchStartX=e.clientX},t=e=>{e.touches&&e.touches.length>1?this.touchDeltaX=0:this.touchDeltaX=e.touches[0].clientX-this.touchStartX},i=e=>{!this._pointerEvent||e.pointerType!==POINTER_TYPE_PEN&&e.pointerType!==POINTER_TYPE_TOUCH||(this.touchDeltaX=e.clientX-this.touchStartX),this._handleSwipe(),"hover"===this._config.pause&&(this.pause(),this.touchTimeout&&clearTimeout(this.touchTimeout),this.touchTimeout=setTimeout((e=>this.cycle(e)),TOUCHEVENT_COMPAT_WAIT+this._config.interval))};SelectorEngine.find(SELECTOR_ITEM_IMG,this._element).forEach((e=>{EventHandler.on(e,EVENT_DRAG_START,(e=>e.preventDefault()))})),this._pointerEvent?(EventHandler.on(this._element,EVENT_POINTERDOWN,(t=>e(t))),EventHandler.on(this._element,EVENT_POINTERUP,(e=>i(e))),this._element.classList.add(CLASS_NAME_POINTER_EVENT)):(EventHandler.on(this._element,EVENT_TOUCHSTART,(t=>e(t))),EventHandler.on(this._element,EVENT_TOUCHMOVE,(e=>t(e))),EventHandler.on(this._element,EVENT_TOUCHEND,(e=>i(e))))}_keydown(e){/input|textarea/i.test(e.target.tagName)||(e.key===ARROW_LEFT_KEY?(e.preventDefault(),isRTL?this.next():this.prev()):e.key===ARROW_RIGHT_KEY&&(e.preventDefault(),isRTL?this.prev():this.next()))}_getItemIndex(e){return this._items=e&&e.parentNode?SelectorEngine.find(SELECTOR_ITEM,e.parentNode):[],this._items.indexOf(e)}_getItemByDirection(e,t){var i=e===DIRECTION_NEXT,n=e===DIRECTION_PREV,s=this._getItemIndex(t),a=this._items.length-1;if((n&&0===s||i&&s===a)&&!this._config.wrap)return t;var r=(s+(e===DIRECTION_PREV?-1:1))%this._items.length;return-1===r?this._items[this._items.length-1]:this._items[r]}_triggerSlideEvent(e,t){var i=this._getItemIndex(e),n=this._getItemIndex(SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element));return EventHandler.trigger(this._element,EVENT_SLIDE,{relatedTarget:e,direction:t,from:n,to:i})}_setActiveIndicatorElement(e){if(this._indicatorsElement){var t=SelectorEngine.findOne(SELECTOR_ACTIVE,this._indicatorsElement);t.classList.remove(CLASS_NAME_ACTIVE),t.removeAttribute("aria-current");for(var i=SelectorEngine.find(SELECTOR_INDICATOR,this._indicatorsElement),n=0;n<i.length;n++)if(Number.parseInt(i[n].getAttribute("data-bs-slide-to"),10)===this._getItemIndex(e)){i[n].classList.add(CLASS_NAME_ACTIVE),i[n].setAttribute("aria-current","true");break}}}_updateInterval(){var e=this._activeElement||SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element);if(e){var t=Number.parseInt(e.getAttribute("data-bs-interval"),10);t?(this._config.defaultInterval=this._config.defaultInterval||this._config.interval,this._config.interval=t):this._config.interval=this._config.defaultInterval||this._config.interval}}_slide(e,t){var i=SelectorEngine.findOne(SELECTOR_ACTIVE_ITEM,this._element),n=this._getItemIndex(i),s=t||i&&this._getItemByDirection(e,i),a=this._getItemIndex(s),r=Boolean(this._interval),E=e===DIRECTION_NEXT?CLASS_NAME_START:CLASS_NAME_END,o=e===DIRECTION_NEXT?CLASS_NAME_NEXT:CLASS_NAME_PREV,_=e===DIRECTION_NEXT?DIRECTION_LEFT:DIRECTION_RIGHT;if(s&&s.classList.contains(CLASS_NAME_ACTIVE))this._isSliding=!1;else if(!this._triggerSlideEvent(s,_).defaultPrevented&&i&&s){if(this._isSliding=!0,r&&this.pause(),this._setActiveIndicatorElement(s),this._activeElement=s,this._element.classList.contains(CLASS_NAME_SLIDE)){s.classList.add(o),reflow(s),i.classList.add(E),s.classList.add(E);var l=getTransitionDurationFromElement(i);EventHandler.one(i,"transitionend",(()=>{s.classList.remove(E,o),s.classList.add(CLASS_NAME_ACTIVE),i.classList.remove(CLASS_NAME_ACTIVE,o,E),this._isSliding=!1,setTimeout((()=>{EventHandler.trigger(this._element,EVENT_SLID,{relatedTarget:s,direction:_,from:n,to:a})}),0)})),emulateTransitionEnd(i,l)}else i.classList.remove(CLASS_NAME_ACTIVE),s.classList.add(CLASS_NAME_ACTIVE),this._isSliding=!1,EventHandler.trigger(this._element,EVENT_SLID,{relatedTarget:s,direction:_,from:n,to:a});r&&this.cycle()}}static carouselInterface(e,t){var i=Data.getData(e,DATA_KEY),n=_objectSpread2(_objectSpread2({},Default),Manipulator.getDataAttributes(e));"object"==typeof t&&(n=_objectSpread2(_objectSpread2({},n),t));var s="string"==typeof t?t:n.slide;if(i||(i=new Carousel(e,n)),"number"==typeof t)i.to(t);else if("string"==typeof s){if(void 0===i[s])throw new TypeError('No method named "'.concat(s,'"'));i[s]()}else n.interval&&n.ride&&(i.pause(),i.cycle())}static jQueryInterface(e){return this.each((function(){Carousel.carouselInterface(this,e)}))}static dataApiClickHandler(e){var t=getElementFromSelector(this);if(t&&t.classList.contains(CLASS_NAME_CAROUSEL)){var i=_objectSpread2(_objectSpread2({},Manipulator.getDataAttributes(t)),Manipulator.getDataAttributes(this)),n=this.getAttribute("data-bs-slide-to");n&&(i.interval=!1),Carousel.carouselInterface(t,i),n&&Data.getData(t,DATA_KEY).to(n),e.preventDefault()}}}if(EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_SLIDE,Carousel.dataApiClickHandler),EventHandler.on(window,EVENT_LOAD_DATA_API,(()=>{for(var e=SelectorEngine.find(SELECTOR_DATA_RIDE),t=0,i=e.length;t<i;t++)Carousel.carouselInterface(e[t],Data.getData(e[t],DATA_KEY))})),defineJQueryPlugin(NAME,Carousel),window.bootstrap=window.bootstrap||{},window.bootstrap.Carousel=Carousel,Joomla&&Joomla.getOptions){var carousels=Joomla.getOptions("bootstrap.carousel");"object"==typeof carousels&&null!==carousels&&Object.keys(carousels).forEach((e=>{var t=carousels[e],i={interval:t.interval?t.interval:5e3,keyboard:!t.keyboard||t.keyboard,pause:t.pause?t.pause:"hover",slide:!!t.slide&&t.slide,wrap:!t.wrap||t.wrap,touch:!t.touch||t.touch},n=Array.from(document.querySelectorAll(e));n.length&&n.map((e=>new window.bootstrap.Carousel(e,i)))}))}export{Carousel as C,_objectSpread2 as _};