import{_ as _objectSpread2}from"./carousel.js";import{P as Popper,c as createPopper}from"./popper.min.js?1614481245";import{B as BaseComponent,E as EventHandler,M as Manipulator,h as isElement,n as noop,b as typeCheckConfig,S as SelectorEngine,D as Data,g as getElementFromSelector,i as isVisible,d as defineJQueryPlugin,c as isRTL}from"./dom.min.js?1614481245";var NAME="dropdown",DATA_KEY="bs.dropdown",EVENT_KEY=".".concat(DATA_KEY),DATA_API_KEY=".data-api",ESCAPE_KEY="Escape",SPACE_KEY="Space",TAB_KEY="Tab",ARROW_UP_KEY="ArrowUp",ARROW_DOWN_KEY="ArrowDown",RIGHT_MOUSE_BUTTON=2,REGEXP_KEYDOWN=new RegExp("".concat(ARROW_UP_KEY,"|").concat(ARROW_DOWN_KEY,"|").concat(ESCAPE_KEY)),EVENT_HIDE="hide".concat(EVENT_KEY),EVENT_HIDDEN="hidden".concat(EVENT_KEY),EVENT_SHOW="show".concat(EVENT_KEY),EVENT_SHOWN="shown".concat(EVENT_KEY),EVENT_CLICK="click".concat(EVENT_KEY),EVENT_CLICK_DATA_API="click".concat(EVENT_KEY).concat(DATA_API_KEY),EVENT_KEYDOWN_DATA_API="keydown".concat(EVENT_KEY).concat(DATA_API_KEY),EVENT_KEYUP_DATA_API="keyup".concat(EVENT_KEY).concat(DATA_API_KEY),CLASS_NAME_DISABLED="disabled",CLASS_NAME_SHOW="show",CLASS_NAME_DROPUP="dropup",CLASS_NAME_DROPEND="dropend",CLASS_NAME_DROPSTART="dropstart",CLASS_NAME_NAVBAR="navbar",SELECTOR_DATA_TOGGLE='[data-bs-toggle="dropdown"]',SELECTOR_FORM_CHILD=".dropdown form",SELECTOR_MENU=".dropdown-menu",SELECTOR_NAVBAR_NAV=".navbar-nav",SELECTOR_VISIBLE_ITEMS=".dropdown-menu .dropdown-item:not(.disabled):not(:disabled)",PLACEMENT_TOP=isRTL?"top-end":"top-start",PLACEMENT_TOPEND=isRTL?"top-start":"top-end",PLACEMENT_BOTTOM=isRTL?"bottom-end":"bottom-start",PLACEMENT_BOTTOMEND=isRTL?"bottom-start":"bottom-end",PLACEMENT_RIGHT=isRTL?"left-start":"right-start",PLACEMENT_LEFT=isRTL?"right-start":"left-start",Default={offset:[0,2],flip:!0,boundary:"clippingParents",reference:"toggle",display:"dynamic",popperConfig:null},DefaultType={offset:"(array|string|function)",flip:"boolean",boundary:"(string|element)",reference:"(string|element|object)",display:"string",popperConfig:"(null|object|function)"};class Dropdown extends BaseComponent{constructor(e,t){super(e),this._popper=null,this._config=this._getConfig(t),this._menu=this._getMenuElement(),this._inNavbar=this._detectNavbar(),this._addEventListeners()}static get Default(){return Default}static get DefaultType(){return DefaultType}static get DATA_KEY(){return DATA_KEY}toggle(){if(!this._element.disabled&&!this._element.classList.contains(CLASS_NAME_DISABLED)){var e=this._element.classList.contains(CLASS_NAME_SHOW);Dropdown.clearMenus(),e||this.show()}}show(){if(!(this._element.disabled||this._element.classList.contains(CLASS_NAME_DISABLED)||this._menu.classList.contains(CLASS_NAME_SHOW))){var e=Dropdown.getParentFromElement(this._element),t={relatedTarget:this._element};if(!EventHandler.trigger(this._element,EVENT_SHOW,t).defaultPrevented){if(this._inNavbar)Manipulator.setDataAttribute(this._menu,"popper","none");else{if(void 0===Popper)throw new TypeError("Bootstrap's dropdowns require Popper (https://popper.js.org)");var n=this._element;"parent"===this._config.reference?n=e:isElement(this._config.reference)?(n=this._config.reference,void 0!==this._config.reference.jquery&&(n=this._config.reference[0])):"object"==typeof this._config.reference&&(n=this._config.reference);var o=this._getPopperConfig(),r=o.modifiers.find((e=>"applyStyles"===e.name&&!1===e.enabled));this._popper=createPopper(n,this._menu,o),r&&Manipulator.setDataAttribute(this._menu,"popper","static")}"ontouchstart"in document.documentElement&&!e.closest(SELECTOR_NAVBAR_NAV)&&[].concat(...document.body.children).forEach((e=>EventHandler.on(e,"mouseover",null,noop()))),this._element.focus(),this._element.setAttribute("aria-expanded",!0),this._menu.classList.toggle(CLASS_NAME_SHOW),this._element.classList.toggle(CLASS_NAME_SHOW),EventHandler.trigger(this._element,EVENT_SHOWN,t)}}}hide(){if(!this._element.disabled&&!this._element.classList.contains(CLASS_NAME_DISABLED)&&this._menu.classList.contains(CLASS_NAME_SHOW)){var e={relatedTarget:this._element};EventHandler.trigger(this._element,EVENT_HIDE,e).defaultPrevented||(this._popper&&this._popper.destroy(),this._menu.classList.toggle(CLASS_NAME_SHOW),this._element.classList.toggle(CLASS_NAME_SHOW),Manipulator.removeDataAttribute(this._menu,"popper"),EventHandler.trigger(this._element,EVENT_HIDDEN,e))}}dispose(){super.dispose(),EventHandler.off(this._element,EVENT_KEY),this._menu=null,this._popper&&(this._popper.destroy(),this._popper=null)}update(){this._inNavbar=this._detectNavbar(),this._popper&&this._popper.update()}_addEventListeners(){EventHandler.on(this._element,EVENT_CLICK,(e=>{e.preventDefault(),e.stopPropagation(),this.toggle()}))}_getConfig(e){if(e=_objectSpread2(_objectSpread2(_objectSpread2({},this.constructor.Default),Manipulator.getDataAttributes(this._element)),e),typeCheckConfig(NAME,e,this.constructor.DefaultType),"object"==typeof e.reference&&!isElement(e.reference)&&"function"!=typeof e.reference.getBoundingClientRect)throw new TypeError("".concat(NAME.toUpperCase(),': Option "reference" provided type "object" without a required "getBoundingClientRect" method.'));return e}_getMenuElement(){return SelectorEngine.next(this._element,SELECTOR_MENU)[0]}_getPlacement(){var e=this._element.parentNode;if(e.classList.contains(CLASS_NAME_DROPEND))return PLACEMENT_RIGHT;if(e.classList.contains(CLASS_NAME_DROPSTART))return PLACEMENT_LEFT;var t="end"===getComputedStyle(this._menu).getPropertyValue("--bs-position").trim();return e.classList.contains(CLASS_NAME_DROPUP)?t?PLACEMENT_TOPEND:PLACEMENT_TOP:t?PLACEMENT_BOTTOMEND:PLACEMENT_BOTTOM}_detectNavbar(){return null!==this._element.closest(".".concat(CLASS_NAME_NAVBAR))}_getOffset(){var{offset:e}=this._config;return"string"==typeof e?e.split(",").map((e=>Number.parseInt(e,10))):"function"==typeof e?t=>e(t,this._element):e}_getPopperConfig(){var e={placement:this._getPlacement(),modifiers:[{name:"preventOverflow",options:{altBoundary:this._config.flip,boundary:this._config.boundary}},{name:"offset",options:{offset:this._getOffset()}}]};return"static"===this._config.display&&(e.modifiers=[{name:"applyStyles",enabled:!1}]),_objectSpread2(_objectSpread2({},e),"function"==typeof this._config.popperConfig?this._config.popperConfig(e):this._config.popperConfig)}static dropdownInterface(e,t){var n=Data.getData(e,DATA_KEY);if(n||(n=new Dropdown(e,"object"==typeof t?t:null)),"string"==typeof t){if(void 0===n[t])throw new TypeError('No method named "'.concat(t,'"'));n[t]()}}static jQueryInterface(e){return this.each((function(){Dropdown.dropdownInterface(this,e)}))}static clearMenus(e){if(!e||e.button!==RIGHT_MOUSE_BUTTON&&("keyup"!==e.type||e.key===TAB_KEY))for(var t=SelectorEngine.find(SELECTOR_DATA_TOGGLE),n=0,o=t.length;n<o;n++){var r=Data.getData(t[n],DATA_KEY),i={relatedTarget:t[n]};if(e&&"click"===e.type&&(i.clickEvent=e),r){var s=r._menu;if(t[n].classList.contains(CLASS_NAME_SHOW))if(!(e&&("click"===e.type&&/input|textarea/i.test(e.target.tagName)||"keyup"===e.type&&e.key===TAB_KEY)&&s.contains(e.target)))EventHandler.trigger(t[n],EVENT_HIDE,i).defaultPrevented||("ontouchstart"in document.documentElement&&[].concat(...document.body.children).forEach((e=>EventHandler.off(e,"mouseover",null,noop()))),t[n].setAttribute("aria-expanded","false"),r._popper&&r._popper.destroy(),s.classList.remove(CLASS_NAME_SHOW),t[n].classList.remove(CLASS_NAME_SHOW),Manipulator.removeDataAttribute(s,"popper"),EventHandler.trigger(t[n],EVENT_HIDDEN,i))}}}static getParentFromElement(e){return getElementFromSelector(e)||e.parentNode}static dataApiKeydownHandler(e){if(!(/input|textarea/i.test(e.target.tagName)?e.key===SPACE_KEY||e.key!==ESCAPE_KEY&&(e.key!==ARROW_DOWN_KEY&&e.key!==ARROW_UP_KEY||e.target.closest(SELECTOR_MENU)):!REGEXP_KEYDOWN.test(e.key))&&(e.preventDefault(),e.stopPropagation(),!this.disabled&&!this.classList.contains(CLASS_NAME_DISABLED))){var t=Dropdown.getParentFromElement(this),n=this.classList.contains(CLASS_NAME_SHOW);if(e.key===ESCAPE_KEY)return(this.matches(SELECTOR_DATA_TOGGLE)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE)[0]).focus(),void Dropdown.clearMenus();if(n||e.key!==ARROW_UP_KEY&&e.key!==ARROW_DOWN_KEY)if(n&&e.key!==SPACE_KEY){var o=SelectorEngine.find(SELECTOR_VISIBLE_ITEMS,t).filter(isVisible);if(o.length){var r=o.indexOf(e.target);e.key===ARROW_UP_KEY&&r>0&&r--,e.key===ARROW_DOWN_KEY&&r<o.length-1&&r++,o[r=-1===r?0:r].focus()}}else Dropdown.clearMenus();else(this.matches(SELECTOR_DATA_TOGGLE)?this:SelectorEngine.prev(this,SELECTOR_DATA_TOGGLE)[0]).click()}}}if(EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_DATA_TOGGLE,Dropdown.dataApiKeydownHandler),EventHandler.on(document,EVENT_KEYDOWN_DATA_API,SELECTOR_MENU,Dropdown.dataApiKeydownHandler),EventHandler.on(document,EVENT_CLICK_DATA_API,Dropdown.clearMenus),EventHandler.on(document,EVENT_KEYUP_DATA_API,Dropdown.clearMenus),EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_DATA_TOGGLE,(function(e){e.preventDefault(),e.stopPropagation(),Dropdown.dropdownInterface(this,"toggle")})),EventHandler.on(document,EVENT_CLICK_DATA_API,SELECTOR_FORM_CHILD,(e=>e.stopPropagation())),defineJQueryPlugin(NAME,Dropdown),window.bootstrap=window.bootstrap||{},window.bootstrap.Dropdown=Dropdown,Joomla&&Joomla.getOptions){var dropdowns=Joomla.getOptions("bootstrap.dropdown");"object"==typeof dropdowns&&null!==dropdowns&&Object.keys(dropdowns).forEach((e=>{var t=dropdowns[e],n={interval:t.interval?t.interval:5e3,pause:t.pause?t.pause:"hover"},o=Array.from(document.querySelectorAll(e));o.length&&o.map((e=>new window.bootstrap.Dropdown(e,n)))}))}export{Dropdown as D};