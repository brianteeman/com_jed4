Joomla=window.Joomla||{},function(e,a){"use strict";e.hideAssociation=function(e,t){[].slice.call(a.querySelectorAll("#associations .control-group")).forEach((function(a){var n=a.querySelector(".control-label label");n&&(n.getAttribute("for").replace(new RegExp("_name$"),"")==="".concat(e,"_associations_").concat(t.replace("-","_"))&&a.classList.add("hidden"))}))},e.showAssociationMessage=function(){var t=[].slice.call(a.querySelectorAll("#associations .control-group")),n=a.getElementById("associations");if(n){var o=a.createElement("joomla-alert");o.innerHTML=e.JText._("JGLOBAL_ASSOC_NOT_POSSIBLE"),n.insertAdjacentElement("afterbegin",o)}t.forEach((function(e){e.classList.add("hidden")}))},e.injectAssociations=function(a,t){var n;a.success?(0!==a.data.length&&[].slice.call(Object.keys(a.data)).forEach((function(e){n=t+e.replace("-","_"),window[n](a.data[e].id,a.data[e].title,a.data[e].catid,null,null,e)})),a.message&&e.renderMessages({notice:[a.message]})):e.renderMessages({warning:[e.JText._("JGLOBAL_ASSOCIATIONS_PROPAGATE_FAILED")]})},e.propagateAssociation=function(t,n){var o=a.getElementById("".concat(t,"_id")).value,s=a.getElementById("jform_language"),c={task:"ajax.fetchAssociations",format:"json",assocId:o,excludeLang:s.options[s.selectedIndex].value};c[e.getOptions("csrf.token","")]=1;var i=Object.keys(c).reduce((function(e,a){return e.push("".concat(a,"=").concat(encodeURIComponent(c[a]))),e}),[]).join("&"),r="".concat(a.forms.adminForm.action,"&").concat(i);return e.request({url:r,method:"GET",data:JSON.stringify(c),headers:{"Content-Type":"application/json"},onSuccess:function(a){e.injectAssociations(JSON.parse(a),n)},onError:function(){e.renderMessages({warning:[e.JText._("JGLOBAL_ASSOCIATIONS_PROPAGATE_FAILED")]})}}),!1},a.addEventListener("DOMContentLoaded",(function(){var t=e.getOptions("system.associations.edit"),n=t.formControl||"jform",o=a.getElementById("".concat(n,"_language"));1===parseInt(t.hidden,10)?e.showAssociationMessage():o&&e.hideAssociation(n,o.value),o&&o.addEventListener("change",(function(t){var o=t.target;e.removeMessages();var s=!1;[].slice.call(a.querySelectorAll("#associations .control-group")).forEach((function(e){var t=e.querySelector(".control-label label").getAttribute("for").replace("_name","").replace("jform_associations_","");e.classList.remove("hidden"),s||""===a.getElementById("".concat(n,"_associations_").concat(t,"_id")).value||(s=!0);var o=a.getElementById("".concat(n,"_associations_").concat(t,"_clear"));o.onclick?o.onclick():o.click&&o.click()})),s&&e.renderMessages({warning:[e.JText._("JGLOBAL_ASSOCIATIONS_RESET_WARNING")]});var c=o.value;"*"===c?e.showAssociationMessage():e.hideAssociation(n,c)}))}))}(Joomla,document);