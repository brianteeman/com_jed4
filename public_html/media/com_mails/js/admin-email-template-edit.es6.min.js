((t,e)=>{"use strict";class a{constructor(t,e){this.form=t,this.inputSubject=this.form.querySelector("#jform_subject"),this.inputBody=this.form.querySelector("#jform_body"),this.inputHtmlBody=this.form.querySelector("#jform_htmlbody"),this.templateData=e&&e.templateData?e.templateData:{},this.form.EmailTemplateEdit=this}setBodyValue(t){this.inputBody.disabled||(e.editors.instances[this.inputBody.id]?e.editors.instances[this.inputBody.id].setValue(t):this.inputBody.value=t)}setHtmlBodyValue(t){this.inputHtmlBody.disabled||(e.editors.instances[this.inputHtmlBody.id]?e.editors.instances[this.inputHtmlBody.id].setValue(t):this.inputHtmlBody.value=t)}insertTag(t,a){if(!t)return!1;let s;switch(a){case"body":s=this.inputBody;break;case"htmlbody":s=this.inputHtmlBody;break;default:return!1}return!s.disabled&&(e.editors.instances[s.id]?e.editors.instances[s.id].replaceSelection(t):s.value+=` ${t}`,!0)}bindListeners(){const a=t.querySelectorAll('input[type=radio][name="jform[subject_switcher]"]'),s=t.querySelectorAll('input[type=radio][name="jform[body_switcher]"]'),i=t.querySelectorAll('input[type=radio][name="jform[htmlbody_switcher]"]'),d=({target:t})=>{"0"===t.value?(this.inputSubject.disabled=!0,this.inputSubject.value=this.templateData.subject?this.templateData.subject.master:""):"1"===t.value?(this.inputSubject.disabled=!1,this.inputSubject.value=this.templateData.subject?this.templateData.subject.translated:""):console.error("unrecognised value")};Array.prototype.forEach.call(a,(t=>{t.addEventListener("change",d)}));const o=({target:t})=>{const e=this.form.querySelector(".tags-container-body");"0"===t.value?(this.setBodyValue(this.templateData.body?this.templateData.body.master:""),this.inputBody.disabled=!0,e.classList.add("hidden")):"1"===t.value?(this.inputBody.disabled=!1,this.inputBody.readOnly=!1,this.setBodyValue(this.templateData.body?this.templateData.body.translated:""),e.classList.remove("hidden")):console.error("unrecognised value")};Array.prototype.forEach.call(s,(t=>{t.addEventListener("change",o)}));const l=({target:t})=>{const a=this.form.querySelector(".tags-container-htmlbody");"0"===t.value?(this.setHtmlBodyValue(this.templateData.htmlbody?this.templateData.htmlbody.master:""),this.inputHtmlBody.disabled=!0,e.editors.instances[this.inputHtmlBody.id].disable(!0),a.classList.add("hidden")):"1"===t.value?(e.editors.instances[this.inputHtmlBody.id].disable(!1),this.inputHtmlBody.disabled=!1,this.inputHtmlBody.readOnly=!1,this.setHtmlBodyValue(this.templateData.htmlbody?this.templateData.htmlbody.translated:""),a.classList.remove("hidden")):console.error("unrecognised value")};Array.prototype.forEach.call(i,(t=>{t.addEventListener("change",l)})),this.form.querySelectorAll(".edit-action-add-tag").forEach((t=>{t.addEventListener("click",(t=>{t.preventDefault();const e=t.target;this.insertTag(e.dataset.tag,e.dataset.target)}))}))}}t.addEventListener("DOMContentLoaded",(()=>{new a(t.getElementById("item-form"),e.getOptions("com_mails")).bindListeners()}))})(document,Joomla);