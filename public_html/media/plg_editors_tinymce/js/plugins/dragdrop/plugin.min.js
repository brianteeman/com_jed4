function _defineProperty(t,e,a){return e in t?Object.defineProperty(t,e,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[e]=a,t}tinymce.PluginManager.add("jdragndrop",(function(t){var e;function a(a){var n=new FileReader;n.onload=function(n){var o=n.target.result,r=o.indexOf("base64")+7,i=o.slice(r,o.length);!function(a,n){var o,r="".concat(t.settings.uploadUri,"&path=").concat(t.settings.comMediaAdapter),i=(_defineProperty(o={},t.settings.csrfToken,"1"),_defineProperty(o,"name",a),_defineProperty(o,"content",n),_defineProperty(o,"parent",t.settings.parentUploadFolder),o);Joomla.request({url:r,method:"POST",data:JSON.stringify(i),headers:{"Content-Type":"application/json"},onSuccess:function(a){var n;try{n=JSON.parse(a)}catch(e){t.windowManager.alert("".concat(Joomla.Text._("JERROR"),": {e}"))}if(n.data&&n.data.path){var o;if(e=n.data,/local-/.test(e.adapter)){var r=Joomla.getOptions("system.paths").rootFull;o="".concat(n.data.thumb_path.split(r)[1])}else e.thumb_path&&(o=e.thumb_path);var i=function(a){var n=a.getData(),r=n.altEmpty?' alt=""':"",i=n.altText?' alt="'.concat(n.altText,'"'):r,c=n.isLazy?' loading="lazy"':"",l=n.isLazy?' width="'.concat(e.width,'"'):"",s=n.isLazy?' height="'.concat(e.height,'"'):"";t.execCommand("mceInsertContent",!1,'<img src="'.concat(o,'"').concat(i).concat(c).concat(l).concat(s,"/>"))};t.windowManager.open({title:Joomla.Text._("PLG_TINY_DND_ADDITIONALDATA"),body:{type:"panel",items:[{type:"input",name:"altText",label:Joomla.Text._("PLG_TINY_DND_ALTTEXT")},{type:"checkbox",name:"altEmpty",label:Joomla.Text._("PLG_TINY_DND_EMPTY_ALT")},{type:"checkbox",name:"isLazy",label:Joomla.Text._("PLG_TINY_DND_LAZYLOADED")}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",name:"submitButton",text:"Save",primary:!0}],initialData:{altText:"",isLazy:!0,altEmpty:!1},onSubmit:function(t){i(t),t.close()},onCancel:function(t){i(t)}})}},onError:function(e){t.windowManager.alert("Error: ".concat(e.statusText))}})}(a.name,i)},n.readAsDataURL(a)}tinyMCE.DOM.bind(document,"dragleave",(function(e){return e.stopPropagation(),e.preventDefault(),t.contentAreaContainer.style.borderWidth="1px 0 0",!1})),t.on("dragenter",(function(t){return t.stopPropagation(),!1})),t.on("dragover",(function(e){return e.preventDefault(),t.contentAreaContainer.style.borderStyle="dashed",t.contentAreaContainer.style.borderWidth="5px",!1})),"undefined"!=typeof FormData?t.on("drop",(function(e){(e.preventDefault(),e.dataTransfer&&e.dataTransfer.files&&e.dataTransfer.files.length>0)&&[].slice.call(e.dataTransfer.files).forEach((function(t){t.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)&&a(t)}));t.contentAreaContainer.style.borderWidth="1px 0 0"})):(Joomla.renderMessages({error:[Joomla.JText._("PLG_TINY_ERR_UNSUPPORTEDBROWSER")]}),t.on("drop",(function(t){return t.preventDefault(),!1})))}));