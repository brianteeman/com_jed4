function _defineProperty(a,b,c){return b in a?Object.defineProperty(a,b,{value:c,enumerable:!0,configurable:!0,writable:!0}):a[b]=c,a}tinymce.PluginManager.add("jdragndrop",function(a){function b(b,c){var e,f="".concat(a.settings.uploadUri,"&path=").concat(a.settings.comMediaAdapter),g=(e={},_defineProperty(e,a.settings.csrfToken,"1"),_defineProperty(e,"name",b),_defineProperty(e,"content",c),_defineProperty(e,"parent",a.settings.parentUploadFolder),e);Joomla.request({url:f,method:"POST",data:JSON.stringify(g),headers:{"Content-Type":"application/json"},onSuccess:function onSuccess(b){var c;try{c=JSON.parse(b)}catch(b){a.windowManager.alert("".concat(Joomla.Text._("JERROR"),": {e}"))}if(c.data&&c.data.path){d=c.data;var g;if(/local-/.test(d.adapter)){var e=Joomla.getOptions("system.paths"),f=e.rootFull;g="".concat(c.data.thumb_path.split(f)[1])}else d.thumb_path&&(g=d.thumb_path);var h=function(b){var c=b.getData(),e=c.altEmpty?" alt=\"\"":"",f=c.altText?" alt=\"".concat(c.altText,"\""):e,h=c.isLazy?" loading=\"lazy\"":"",i=c.isLazy?" width=\"".concat(d.width,"\""):"",j=c.isLazy?" height=\"".concat(d.height,"\""):"";a.execCommand("mceInsertContent",!1,"<img src=\"".concat(g,"\"").concat(f).concat(h).concat(i).concat(j,"/>"))};a.windowManager.open({title:Joomla.Text._("PLG_TINY_DND_ADDITIONALDATA"),body:{type:"panel",items:[{type:"input",name:"altText",label:Joomla.Text._("PLG_TINY_DND_ALTTEXT")},{type:"checkbox",name:"altEmpty",label:Joomla.Text._("PLG_TINY_DND_EMPTY_ALT")},{type:"checkbox",name:"isLazy",label:Joomla.Text._("PLG_TINY_DND_LAZYLOADED")}]},buttons:[{type:"cancel",text:"Cancel"},{type:"submit",name:"submitButton",text:"Save",primary:!0}],initialData:{altText:"",isLazy:!0,altEmpty:!1},onSubmit:function onSubmit(a){h(a),a.close()},onCancel:function onCancel(a){h(a)}})}},onError:function onError(b){a.windowManager.alert("Error: ".concat(b.statusText))}})}function c(a){var c=new FileReader;c.onload=function(c){var d=c.target.result,e=d.indexOf("base64")+7,f=d.slice(e,d.length);b(a.name,f)},c.readAsDataURL(a)}var d;tinyMCE.DOM.bind(document,"dragleave",function(b){return b.stopPropagation(),b.preventDefault(),a.contentAreaContainer.style.borderWidth="1px 0 0",!1}),a.on("dragenter",function(a){return a.stopPropagation(),!1}),a.on("dragover",function(b){return b.preventDefault(),a.contentAreaContainer.style.borderStyle="dashed",a.contentAreaContainer.style.borderWidth="5px",!1}),"undefined"==typeof FormData?(Joomla.renderMessages({error:[Joomla.JText._("PLG_TINY_ERR_UNSUPPORTEDBROWSER")]}),a.on("drop",function(a){return a.preventDefault(),!1})):a.on("drop",function(b){if(b.preventDefault(),b.dataTransfer&&b.dataTransfer.files&&0<b.dataTransfer.files.length){var d=[].slice.call(b.dataTransfer.files);d.forEach(function(a){a.name.toLowerCase().match(/\.(jpg|jpeg|png|gif)$/)&&c(a)})}a.contentAreaContainer.style.borderWidth="1px 0 0"})});