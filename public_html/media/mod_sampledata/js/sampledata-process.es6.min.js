((e,t,a)=>{"use strict";a.SampleData={inProgress:!1},a.sampledataAjax=(e,s,r)=>{const l=`index.php?option=com_ajax&format=json&group=sampledata&${a.getOptions("csrf.token")}=1`,n=a.getOptions("sample-data"),d=t.createElement("li");d.classList.add(`sampledata-steps-${e}-${r}`);const o=t.createElement("p");o.classList.add("loader-image"),o.classList.add("text-center");const p=t.createElement("img");p.setAttribute("src",n.icon),p.setAttribute("width",30),p.setAttribute("height",30),o.appendChild(p),d.appendChild(o),t.querySelector(`.sampledata-progress-${e} ul`).appendChild(d),a.request({url:`${l}&type=${e}&plugin=SampledataApplyStep${r}&step=${r}`,method:"GET",perform:!0,onSuccess:l=>{const n=d.querySelector(".loader-image");n.parentNode.removeChild(n);let o={};try{o=JSON.parse(l)}catch(t){return a.renderMessages({error:[a.JText._("MOD_SAMPLEDATA_INVALID_RESPONSE")]},`.sampledata-steps-${e}-${r}`),void(a.SampleData.inProgress=!1)}let p,i="";if(o.success&&o.data&&o.data.length>0){const l=t.querySelector(`.sampledata-progress-${e} .progress-bar`);if(o.data.forEach((t=>{null!==t&&(p=t.success,i=p?"bg-success":"bg-danger",p?a.renderMessages({message:[t.message]},`.sampledata-steps-${e}-${r}`):a.renderMessages({error:[t.message]},`.sampledata-steps-${e}-${r}`))})),l.innerText=`${r}/${s}`,l.style.width=r/s*100+"%",l.setAttribute("aria-valuemin",0),l.setAttribute("aria-valuemax",100),l.setAttribute("aria-valuenow",r/s*100),l.classList.add(i),p&&r<=s){const t=r+1;t<=s&&a.sampledataAjax(e,s,t)}}else a.renderMessages({error:[a.JText._("MOD_SAMPLEDATA_INVALID_RESPONSE")]},`.sampledata-steps-${e}-${r}`),a.SampleData.inProgress=!1},onError:()=>{alert("Something went wrong! Please close and reopen the browser and try again!")}})},a.sampledataApply=s=>{const r=s.getAttribute("data-type"),l=s.getAttribute("data-steps");if(a.SampleData.inProgress)return;if(s.getAttribute("data-processed"))return void alert(a.JText._("MOD_SAMPLEDATA_ITEM_ALREADY_PROCESSED"));if(!e.confirm(a.JText._("MOD_SAMPLEDATA_CONFIRM_START")))return!1;return[].slice.call(t.querySelectorAll(`.sampledata-progress-${r}`)).forEach((e=>{e.classList.remove("d-none")})),s.getAttribute("data-processed",!0),a.SampleData.inProgress=!0,a.sampledataAjax(r,l,1),!1};const s=()=>{const e=t.getElementById("sample-data-wrapper");if(e){[].slice.call(e.querySelectorAll(".apply-sample-data")).forEach((e=>{e.addEventListener("click",(({target:e})=>a.sampledataApply(e)))}))}t.removeEventListener("DOMContentLoaded",s)};t.addEventListener("DOMContentLoaded",s)})(window,document,window.Joomla);